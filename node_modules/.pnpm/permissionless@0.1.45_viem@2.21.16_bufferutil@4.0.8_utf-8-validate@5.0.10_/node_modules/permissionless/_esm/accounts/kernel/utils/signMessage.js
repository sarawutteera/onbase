import { hashMessage, publicActions } from "viem";
import { signMessage as _signMessage } from "viem/actions";
import { isKernelV2 } from "./isKernelV2.js";
import { wrapMessageHash } from "./wrapMessageHash.js";
export async function signMessage(client, { account: account_ = client.account, message, accountAddress, accountVersion }) {
    if (isKernelV2(accountVersion)) {
        return _signMessage(client, {
            account: account_,
            message
        });
    }
    const wrappedMessageHash = wrapMessageHash(hashMessage(message), {
        accountVersion,
        accountAddress,
        chainId: client.chain
            ? client.chain.id
            : await client.extend(publicActions).getChainId()
    });
    const signature = await _signMessage(client, {
        account: account_,
        message: { raw: wrappedMessageHash }
    });
    return signature;
}
//# sourceMappingURL=signMessage.js.map